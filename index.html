<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="">
    <script src=""></script>
</head>

<body class="body">

//MAININFORMATION

<div class="checkout">
    <div class="secure_checkout">
        <h2><i class="fa fa-user-lock"></i> Secure Checkout</h2>
        <form action="" name="mainform">
            <h3><i class="fa fa-user"></i> CUSTOMER INFORMATION</h3>
            <div>
                <label for="full-name"></label>
                <input type="text" id="full-name" name="full-name" placeholder="Your Full Name" required>
                <label for="phone"></label>
                <input type="text" id="phone" name="phone" placeholder="Phone" required>
                <label for="email"></label>
                <input type="text" id="email" name="email" placeholder="Email address" required>
            </div>

            //BILLING

            <h3>BILLING INFORMATION</h3>
            <div>
                <label for="billing-address"></label>
                <input type="text" id="billing-address" name="billing-address" placeholder="Your billing address" required>
                <div>
                    <label for="country">Country</label>
                    <select id="country">
                        <option>select country</option>
                    </select>
                </div>
                <div>
                    <label for="state">State</label>
                    <span id="state-code"><input type="text" id="state"></span>
                </div>
                <label for="zip-code"></label>
                <input type="text" id="zip-code" name="zip-code" placeholder="Zip code" required>
                <label for="city"></label>
                <input type="text" id="city" name="city" placeholder="City" required>
                <label>
                    <input type="checkbox" checked="checked" name="sameadr" > Shipping address same as billing
                </label>
                <label>
                    <input type="checkbox" checked="checked" name="auto-refill">Auto Refill (optional)
                </label>
            </div>

            //PAYMENT

            <h3>PAIMENT DETAILS</h3>
            <div>
                <label for="card-number"></label>
                <input type="text" id="card-number" value="7775967474242349" name="card-number" placeholder="Card number" required>

                <label for="exp-date">Card expiration date</label>
                <input type="text" id="exp-date" name="exp-date" placeholder="MM/YYYY" required>

                <label for="cvv"></label>
                <input type="text" id="cvv" name="cvv" placeholder="CVV" required>
            </div>
            <input type="submit" value="Buy Now" class="btn" id="submitButton">
        </form>
    </div>
    <div class="order_details">
        <h2><i class="fa fa-shopping-cart"></i> Order Details</h2>

        <div>
            <img src="" alt="Trivexa_BioCleanse_TBD_Bottle">
            <span>90 Day Supply</span>
        </div>

        <div class="price-panel">
            <div class="row normal">
                <span class="key">Normal Price</span>
                <span class="value">$999.00</span>
            </div>
            <div class="row">
                <span class="key">Your Price</span>
                <span class="value">$294.00</span>
            </div>
            <div class="row">
                <span class="key">Shipping & Handling</span>
                <span class="value">$0.00</span>
            </div>
            <div class="row">
                <span class="key">Taxes</span>
                <span class="value">$0.00</span>
            </div>
            <div class="row total">
                <span class="key">Total (USD)</span>
                <span class="value">$294.00</span>
            </div>
        </div>

    </div>
</div>
<script>
    // user country code for selected option
    let user_country_code = "US";

    (function () {
        // script https://www.html-code-generator.com/html/drop-down/country-region

        // Get the country name and state name from the imported script.


        // creating country name drop-down
        let option = '';
        option += '<option>select country</option>';

        document.getElementById('country').innerHTML = option;

        // creating states name drop-down
        let text_box = '<input type="text" class="input-text" id="state">';
        let state_code_id = document.getElementById("state-code");


    })();
    let user = {
        static: {
            loginId: "testOne",
            password: "StartUp2022!",
            product1_id: "1",
            campaignId: "2",
        },
        userData: {
            firstName: "",
            lastName: "",
            emailAddress: "",
        },
        address: {
            phoneNumber: "",

            address1: "",
            city: "",
            state: '',
            country: "",

            postalCode: "",

            shipAddress1: "",
            shipState: "",
            shipCity: "",
            shipCountry: "",
            shipPostalCode: ""
        },
        payData: {
            paySource: "CREDITCARD",
            cardNumber: "7775967474242349",
            cardMonth: "",
            cardYear: "",
            cardSecurityCode: "",
        }
    }


    let konnektiveForm = document.forms.mainform
    konnektiveForm.addEventListener('submit', async (e) => {
        user.userData.firstName = await document.forms.mainform['full-name'].value.split(" ")[0]
        user.userData.lastName = await document.forms.mainform['full-name'].value.split(" ")[1]
        user.userData.emailAddress = await document.forms.mainform['email'].value
        // user.address.phoneNumber = await document.forms.mainform['phone'].value

        user.address.shipCountry = await document.forms.mainform['country'].value
        user.address.shipCity = await document.forms.mainform['city'].value
        user.address.shipAddress1 = await document.forms.mainform['billing-address'].value
        user.address.shipState = await document.forms.mainform['state'].value
        user.address.shipPostalCode = await document.forms.mainform['zip-code'].value

        user.payData.cardNumber = await document.forms.mainform['card-number'].value
        user.payData.cardMonth = await document.forms.mainform['exp-date'].value.split("/")[0]
        user.payData.cardYear = await document.forms.mainform['exp-date'].value.split("/")[1]
        user.payData.cardSecurityCode = await document.forms.mainform['cvv'].value


        console.log(user)
        e.preventDefault()
        let url = 'https://y5url4l1c2.execute-api.us-east-1.amazonaws.com/dev/' +
                //static
            `?loginId=${user.static.loginId}` +
            '&' +
            `password=${user.static.password}` +
            '&' +
            `product1_id=${user.static.product1_id}` +
            '&' +
            `campaignId=${user.static.campaignId}` +
                //name
            '&' +
            `firstName=${user.userData.firstName}` +
            '&' +
            `lastName=${user.userData.lastName}` +
                //address
            '&' +
            `emailAddress=${user.userData.emailAddress}` +
            '&' +
            `phoneNumber=${user.address.phoneNumber}` +
                //paydata
            '&' +
            `paySource=${user.payData.cardNumber}` +
            '&' +
            `cardNumber=${user.payData.cardNumber}` +
            '&' +
            `cardMonth=${user.payData.cardMonth}` +
            '&' +
            `cardYear=${user.payData.cardYear}` +
            '&' +
            `cardSecurityCode=${user.payData.cardSecurityCode}` +
            '&' +
                //address
            `shipAddress1=${user.address.shipAddress1}` +
            '&' +
            `address1=${user.address.shipAddress1}` +
            '&' +
            `postalCode=${user.address.shipPostalCode}` +
            '&' +
            `state=${user.address.shipState}` +
            '&' +
            `city=${user.address.shipCity}` +
            '&' +
            `country=${user.address.shipCountry}` +
            '&' +
            `shipCity=${user.address.shipCity}` +
            '&' +
            `shipCountry=${user.address.shipCountry}` +
            '&' +
            `shipPostalCode=${user.address.shipPostalCode}`

        fetch(url, {
            method: 'POST',
            body: {...user.static, ...user.userData, ...user.address, ...user.payData}
        }).then(data => {
            console.log(data)
        }).catch(err => {
            console.log(err)
        })
    })
    console.log(konnektiveForm.phone)

</script>
<script></script>
</body>

</html>